<!-- components/header.html -->
<header class="site-header">
    <div class="header-wrapper">
        <!-- Logo -->
        <div class="logo">
            <a href="https://moonstore.codearlo.com">
                <img src="../assets/img/logo.png?v=20250517" alt="Moon Store Logo">
                <span>Moon Store</span>
            </a>
        </div>
        
        <!-- Barra de búsqueda (desktop y mobile) -->
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Buscar productos..." class="search-input">
            <button type="button" class="search-button" id="searchButton">
                <svg viewBox="0 0 24 24" width="20" height="20">
                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" fill="currentColor"/>
                </svg>
                Buscar
            </button>
        </div>
        
        <!-- Botones de usuario y carrito -->
        <div class="header-actions">
            <!-- Usuario -->
            <button class="action-button user-button" id="userButton">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z" fill="currentColor"/>
                </svg>
            </button>
            
            <!-- Carrito -->
            <button class="action-button cart-button" id="cartButton">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path d="M7.2998 5H22L20 12H8.37675M21 16H9L7 3H4M4 8H2M5 11H2M6 14H2M10 20C10 20.5523 9.55228 21 9 21C8.44772 21 8 20.5523 8 20C8 19.4477 8.44772 19 9 19C9.55228 19 10 19.4477 10 20ZM21 20C21 20.5523 20.5523 21 20 21C19.4477 21 19 20.5523 19 20C19 19.4477 19.4477 19 20 19C20.5523 19 21 19.4477 21 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                </svg>
                <span class="cart-count">0</span>
            </button>
            
            <!-- Menú móvil -->
            <button class="mobile-menu-toggle" id="menuToggle" aria-label="Abrir menú" aria-expanded="false">
                <svg viewBox="0 0 24 24" width="24" height="24">
                    <path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    </div>
    
    <!-- Navegación de productos -->
    <nav class="products-nav">
        <div class="nav-container">
            <ul class="nav-menu" id="navMenu">
                <li class="nav-item dropdown">
                    <button class="nav-link dropdown-toggle" data-category="todos">
                        TODOS LOS PRODUCTOS
                        <svg class="dropdown-icon" viewBox="0 0 24 24" width="16" height="16">
                            <path d="M7,10L12,15L17,10H7Z" fill="currentColor"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <a href="productos.html" class="dropdown-item">Ver todos</a>
                        <a href="productos.html?categoria=gaming" class="dropdown-item">PC Gaming</a>
                        <a href="productos.html?categoria=workstation" class="dropdown-item">Workstations</a>
                        <a href="productos.html?categoria=accesorios" class="dropdown-item">Accesorios</a>
                        <a href="productos.html?categoria=componentes" class="dropdown-item">Componentes</a>
                    </div>
                </li>
                
                <li class="nav-item">
                    <a href="index.html#ofertas" class="nav-link">
                        OFERTAS
                        <span class="offer-badge">DE LOCURA</span>
                    </a>
                </li>
                
                <li class="nav-item">
                    <a href="productos.html?categoria=pc-completas" class="nav-link">PC COMPLETAS</a>
                </li>
                
                <li class="nav-item">
                    <a href="productos.html?categoria=monitor" class="nav-link">MONITOR</a>
                </li>
                
                <li class="nav-item">
                    <a href="index.html#servicios" class="nav-link">SERVICIOS</a>
                </li>
                
                <li class="nav-item">
                    <a href="index.html#contacto" class="nav-link">CONTACTO</a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<!-- Overlay para el menú móvil -->
<div id="menuOverlay" class="menu-overlay"></div>

<!-- Script para forzar recarga de recursos -->
<script>
    // Forzar recarga de recursos críticos
    const timestamp = Date.now();
    document.querySelectorAll('.logo img, .cart-icon').forEach(img => {
        if (img.src) {
            const currentSrc = img.getAttribute('src');
            if (currentSrc.includes('?')) {
                img.setAttribute('src', currentSrc.split('?')[0] + '?v=' + timestamp);
            } else {
                img.setAttribute('src', currentSrc + '?v=' + timestamp);
            }
        }
    });
</script>